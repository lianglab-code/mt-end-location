\documentclass[11pt]{article}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{bm}
\usepackage[margin=1in]{geometry}
\usepackage{mathtools}

\newcommand{\bmmp}{\bm{\mathcal{P}}} % curve
\newcommand{\splinepk}{\sum_j{Q^k_j\bm{P}_j}}
\newcommand{\splinept}{\sum_j{Q_j(t)\bm{P}_j}}
\newcommand{\splineptt}{\sum_j{Q_j(t)P_j}}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\vP}{\bm{\mathrm{P}}} % control point vector
\newcommand{\vQ}{\bm{\mathrm{Q}}} % cardinal basis vector
\newcommand{\sP}[1]{\mathcal{P}_{#1}} % scalar
\newcommand{\bitk}{\beta_i(t_k)}
\newcommand{\bjtk}{\beta_j(t_k)}
\renewcommand{\b}[1]{\beta_{#1}}

\begin{document}
 
\title{Regularization of Cardinal B-Spline Curves}
\author{jerviedog}
\maketitle

\section{Introduction}
This note is about the calculation of the regularization of cardinal b-spline curves involved in the curve fitting problems. It seems convenient to use the vector/matrix representation other than the summation representation. The vector/matrix representation is also more clear, especially when wrap-around operation is needed. Alas, I have made a mistake when using summation representation.

\section{The regularization terms}
The curve is represented by cardinal b-spline of order $k$:
\[
\bmmp=\splinept.
\]
where $\bm{P}_j$ are the control points, and $Q^k_j$ are the cardinal spline basis of order k. The support of $Q^k_j$ is $\left[j-1,j-1+k\right)$.

For the simplicity, we consider the 1-dimensional case so I can use vector/matrix representation in a more clear way, and the order superscript $k$ is dropped (order $k$ is assumed unless specified):
\[
\bmmp=\vP^{T}\vQ,
\]
where
$\vP = [P_1,P_2,...,P_m]^T$ are control point vector, and $\vQ = [Q_1(t),Q_2(t),...,Q_m(t)]^T$ are the cardinal basis vector. 


The regularization terms are $F_1$ and $F_2$:
\[
F_1 = \int {\|P^\prime_D(t)\|^2 }dt
\]
and
\[
F_2 = \int{\|P^{\prime\prime}_D(t)\|^2}dt .
\]

\section{Appendix}
Here are some relations that would be used in the text.

\begin{itemize}
\item Cardinal splines up to order 4:
\[
\begin{split}
Q_1 &= 
\begin{cases}
1 & 0 \leq x < 1\\
0 & otherwise
\end{cases}, \\
Q_2 &= 
\begin{cases}
x & 0 \leq x < 1 \\
-(x-1)+1 & 1 \leq x < 2\\
0 & otherwise
\end{cases}, \\
Q_3 &= 
\begin{cases}
\frac{1}{2}x^2 & 0 \leq x < 1 \\
-(x-1)^2+(x-1)+\frac{1}{2} & 1 \leq x < 2\\
\frac{1}{2}(x-2)^2-(x-2)+\frac{1}{2} & 2 \leq x < 3\\
0 & otherwise
\end{cases}, \\
Q_4 &= 
\begin{cases}
\frac{1}{6}x^3 & 0 \leq x < 1 \\
-\frac{1}{2}(x-1)^3+\frac{1}{2}(x-1)^2+\frac{1}{2}(x-1)+\frac{1}{6} & 1 \leq x < 2\\
\frac{1}{2}(x-2)^3-(x-2)^2+\frac{2}{3} & 2 \leq x < 3\\
-\frac{1}{6}(x-3)^3+\frac{1}{2}(x-3)^2-\frac{1}{2}(x-3)+\frac{1}{6} & 3 \leq x < 4\\
0 & otherwise
\end{cases}.
\end{split}
\]

\item Differentiation of cardinal spline:
\[
a
\]
\end{itemize}

\end{document}